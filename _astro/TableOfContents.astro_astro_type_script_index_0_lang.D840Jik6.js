import{i as A}from"./isSticky.dTXE156N.js";function L(n){return n&&n.__esModule&&Object.prototype.hasOwnProperty.call(n,"default")?n.default:n}var p={},f={},g;function E(){if(g)return f;g=1,Object.defineProperty(f,"__esModule",{value:!0}),f.ScrollSpy=void 0;class n{menuList;options;scroller;sections;activeItem=null;constructor(e,t={}){if(!e)throw new Error("Your navigation query selector is the first argument.");if(typeof t!="object")throw new Error("The second argument must be an instance of an Object.");let o={sectionClass:".scrollspy",menuActiveTarget:"li > a",offset:0,hrefAttribute:"href",activeClass:"active",scrollContainer:"",smoothScroll:{}};t.smoothScroll=t.smoothScroll===!0&&{}||t.smoothScroll,this.menuList=e instanceof HTMLElement?e:document.querySelector(e),this.options=Object.assign({},o,t),this.options.scrollContainer?this.scroller=this.options.scrollContainer instanceof HTMLElement?this.options.scrollContainer:document.querySelector(this.options.scrollContainer):this.scroller=window,this.sections=document.querySelectorAll(this.options.sectionClass),this.attachEventListeners()}attachEventListeners(){this.scroller&&(this.scroller.addEventListener("scroll",()=>this.onScroll()),this.options.smoothScroll&&this.menuList&&this.menuList.querySelectorAll(this.options.menuActiveTarget).forEach(t=>t.addEventListener("click",this.onClick.bind(this))))}onClick(e){if(e.target){const t=e.target.getAttribute(this.options.hrefAttribute);if(t){const o=document.querySelector(t);o&&this.options.smoothScroll&&(e.preventDefault(),this.scrollTo(o))}}}onScroll(){const e=this.getSectionInView(),t=this.getMenuItemBySection(e);if(!e||!t)return;const o=t?.getAttribute(this.options.hrefAttribute),s=this.activeItem?.getAttribute(this.options.hrefAttribute);t&&o&&o!==s&&(this.removeCurrentActive({ignore:t}),this.setActive(t))}scrollTo(e){const t=typeof this.options.smoothScrollBehavior=="function"&&this.options.smoothScrollBehavior;t?t(e,this.options.smoothScroll):e.scrollIntoView({...this.options.smoothScroll===!0?{}:this.options.smoothScroll,behavior:"smooth"})}getMenuItemBySection(e){if(!e||!this.menuList)return;const t=e.getAttribute("id");return this.menuList.querySelector(`[${this.options.hrefAttribute}="#${t}"]`)}getSectionInView(){for(let e=0;e<this.sections.length;e++){const t=this.sections[e].offsetTop,o=t+this.sections[e].offsetHeight;let s=(document.documentElement.scrollTop||document.body.scrollTop)+this.options.offset;if(this.options.scrollContainer&&this.scroller&&(s=(this.scroller instanceof Window?this.scroller.scrollY:this.scroller.scrollTop)+this.options.offset),s>t&&s<=o)return this.sections[e]}}setActive(e){this.activeItem=e,this.activeItem.classList.contains(this.options.activeClass)||(this.activeItem.classList.add(this.options.activeClass),typeof this.options.onActive=="function"&&this.options.onActive(this.activeItem))}removeCurrentActive({ignore:e}={}){if(this.activeItem)this.activeItem.classList.remove(this.options.activeClass),this.activeItem=null;else if(this.menuList){const{hrefAttribute:t,menuActiveTarget:o,activeClass:s}=this.options,c=e?`${o}.${s}:not([${t}="${e.getAttribute(t)}"])`:`${o}.${s}`;this.menuList.querySelectorAll(c).forEach(i=>i.classList.remove(this.options.activeClass))}}}return f.ScrollSpy=n,f}var S;function w(){if(S)return p;S=1,Object.defineProperty(p,"__esModule",{value:!0});const n=E(),r=(e,t={})=>{const o=new n.ScrollSpy(e,t);return o.onScroll(),window.addEventListener("scroll",()=>o.onScroll()),o};return p.default=r,p}var C=w();const I=L(C);var v={exports:{}},b;function T(){if(b)return v.exports;b=1;function n(r,e=100,t={}){if(typeof r!="function")throw new TypeError(`Expected the first parameter to be a function, got \`${typeof r}\`.`);if(e<0)throw new RangeError("`wait` must not be negative.");const{immediate:o}=typeof t=="boolean"?{immediate:t}:t;let s,c,i,m,a;function d(){const h=s,y=c;return s=void 0,c=void 0,a=r.apply(h,y),a}function u(){const h=Date.now()-m;h<e&&h>=0?i=setTimeout(u,e-h):(i=void 0,o||(a=d()))}const l=function(...h){if(s&&this!==s&&Object.getPrototypeOf(this)===Object.getPrototypeOf(s))throw new Error("Debounced method called with different contexts of the same prototype.");s=this,c=h,m=Date.now();const y=o&&!i;return i||(i=setTimeout(u,e)),y&&(a=d()),a};return Object.defineProperty(l,"isPending",{get(){return i!==void 0}}),l.clear=()=>{i&&(clearTimeout(i),i=void 0)},l.flush=()=>{i&&l.trigger()},l.trigger=()=>{a=d(),l.clear()},l}return v.exports.debounce=n,v.exports=n,v.exports}var q=T();const x=L(q);document.addEventListener("astro:page-load",()=>{const n=document.querySelector(".toc-current-section"),r=document.querySelector(".stickyHeader"),e=document.querySelector(".toc-toggle"),t=document.getElementById("tocList"),o=document.querySelector(".table-of-contents");let s=!1,c=null;const i=()=>{const u=document.documentElement.clientWidth>=1280;c&&(c(),c=null),u?(t?.classList.remove("toc-list"),t?.style.removeProperty("max-height"),s=!0,o?.classList.remove("is-sticky"),r?.classList.add("rounded-b-xl")):(t?.classList.add("toc-list"),s=!1,t?.style.removeProperty("max-height"),o?.classList.remove("is-sticky"),r?.classList.add("rounded-b-xl"),r&&o&&(c=A(o,{callback:l=>{r.classList.toggle("shadow-lg",l),r.classList.toggle("rounded-b-xl",!l)}})))},m=()=>{document.documentElement.clientWidth>=1280||(s=!s,t&&(t.style.maxHeight=s?`${t.scrollHeight}px`:"0"))};document.querySelectorAll(".smoothLink").forEach(u=>{u.addEventListener("click",()=>{document.documentElement.clientWidth>=1280||(s=!1,t?.style.removeProperty("max-height"))})});const a=u=>{u&&n&&(n.innerHTML=u.innerHTML)};a(document.querySelector(".table-of-contents ul li:first-child a")),I(".table-of-contents ul",{sectionClass:"#postContent h2, #postContent h3, #postContent h4",offset:100,onActive:a}),i();const d=x(i,200);window.addEventListener("resize",d),e?.addEventListener("click",m)});
